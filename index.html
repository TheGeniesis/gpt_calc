<!DOCTYPE html>
<html>
<head>
	<title>Kalkulator</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>
<body>
	<div class="container mt-5">
		<h1 class="mb-3">Kalkulator</h1>
		<div class="form-group row">
			<label for="operator" class="col-sm-2 col-form-label">Operacja:</label>
			<div class="col-sm-10">
				<select id="operator" class="form-control">
					<option value="add">Dodawanie</option>
					<option value="sub">Odejmowanie</option>
					<option value="mul">Mnożenie</option>
					<option value="div">Dzielenie</option>
				</select>
			</div>
		</div>
		<div class="form-group row">
			<label for="equation" class="col-sm-2 col-form-label">Równanie:</label>
			<div class="col-sm-10">
				<div id="equation"></div>
			</div>
		</div>
		<div class="form-group row">
			<label for="answer" class="col-sm-2 col-form-label">Odpowiedź:</label>
			<div class="col-sm-10">
				<input type="text" id="answer" class="form-control">
			</div>
		</div>
		<div class="form-group row">
			<div class="col-sm-10 offset-sm-2">
				<button onclick="validateAnswer()" class="btn btn-primary">Sprawdź</button>
			</div>
		</div>
		<div class="form-group row">
			<div class="col-sm-10 offset-sm-2">
				<div id="result"></div>
			</div>
		</div>
	</div>

	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNSBmZ7" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
	<script>
		// Generates a random number between min and max (inclusive)
	function getRandomNumber(min, max) {
			return Math.floor(Math.random() * (max - min + 1) + min);
		}

		// Generates a random equation based on the selected operator
		function generateEquation() {
			let operator = $('#operator').val();
			let equationText = '';

			switch (operator) {
				case 'add':
					let addend1 = getRandomNumber(1, 100);
					let addend2 = getRandomNumber(1, 100);
					equationText = `${addend1} + ${addend2} = `;
					break;
				case 'sub':
					let minuend = getRandomNumber(1, 100);
					let subtrahend = getRandomNumber(1, minuend);
					equationText = `${minuend} - ${subtrahend} = `;
					break;
				case 'mul':
					let factor1 = getRandomNumber(1, 12);
					let factor2 = getRandomNumber(1, 12);
					equationText = `${factor1} * ${factor2} = `;
					break;
				case 'div':
					let dividend = getRandomNumber(1, 144);
					let divisor = getRandomNumber(1, 12);
					let quotient = dividend / divisor;
					equationText = `${dividend} / ${divisor} = `;
					break;
				default:
					break;
			}

			$('#equation').text(equationText);
			$('#answer').val('');
			$('#result').text('');
		}

		// Validates the user's answer and displays the result
		function validateAnswer() {
			let operator = $('#operator').val();
			let equation = $('#equation').text().trim();
			let expectedAnswer = null;

			switch (operator) {
				case 'add':
					expectedAnswer = parseInt(equation.split(' ')[0]) + parseInt(equation.split(' ')[2]);
					break;
				case 'sub':
					expectedAnswer = parseInt(equation.split(' ')[0]) - parseInt(equation.split(' ')[2]);
					break;
				case 'mul':
					expectedAnswer = parseInt(equation.split(' ')[0]) * parseInt(equation.split(' ')[2]);
					break;
				case 'div':
					expectedAnswer = parseInt(equation.split(' ')[0]) / parseInt(equation.split(' ')[2]);
					break;
				default:
					break;
			}

			let userAnswer = parseInt($('#answer').val());

			if (isNaN(userAnswer)) {
				$('#result').text('Odpowiedź musi być liczbą!');
			} else if (userAnswer === expectedAnswer) {
				$('#result').text('Odpowiedź poprawna!');
				generateEquation();
			} else {
				$('#result').text('Odpowiedź błędna. Spróbuj ponownie.');
			}
		}

		// Generates the initial equation when the page is loaded
		generateEquation();
	</script>
</body>
</html>
